
<!doctype html>
<html lang="vi" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ctu-sematx.github.io/LegoCity/vi/user-guide/data-and-brokers/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../entities/">
      
      
        
          <link rel="alternate" href="../../../user-guide/data-and-brokers/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="vi">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Làm việc với dữ liệu & Broker - LegoCity Smart City Builder</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Merriweather Sans";--md-code-font:"Red Hat Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#du-lieu-va-broker" class="md-skip">
          Bỏ qua
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Đầu trang">
    <a href="../../" title="LegoCity Smart City Builder" class="md-header__button md-logo" aria-label="LegoCity Smart City Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LegoCity Smart City Builder
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Làm việc với dữ liệu & Broker
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Chọn ngôn ngữ">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../user-guide/data-and-brokers/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="vi" class="md-select__link">
              Tiếng Việt
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Tìm kiếm" placeholder="Tìm kiếm" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Tìm kiếm">
        
        <button type="reset" class="md-search__icon md-icon" title="Xoá" aria-label="Xoá" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CTU-SematX/LegoCity" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    CTU-SematX/LegoCity
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  Trang chủ

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about-sematx/" class="md-tabs__link">
          
  
  
  Về SematX

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
  Bắt đầu

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../core-concepts/overview/" class="md-tabs__link">
          
  
  
  Khái niệm cốt lõi

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/" class="md-tabs__link">
          
  
  
  Cài đặt

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Hướng dẫn sử dụng

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../configuration/" class="md-tabs__link">
          
  
  
  Cấu hình

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/" class="md-tabs__link">
          
  
  
  Phát triển

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ai/overview/" class="md-tabs__link">
          
  
  
  Tích hợp AI (Tùy chọn)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/" class="md-tabs__link">
          
  
  
  Triển khai

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/troubleshooting/" class="md-tabs__link">
          
  
  
  Tham khảo

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Thanh điều hướng" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="LegoCity Smart City Builder" class="md-nav__button md-logo" aria-label="LegoCity Smart City Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LegoCity Smart City Builder
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CTU-SematX/LegoCity" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    CTU-SematX/LegoCity
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trang chủ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Về SematX
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Về SematX
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/ecosystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hệ sinh thái
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Công cụ & Công nghệ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bắt đầu
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bắt đầu
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Khởi động Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Khởi động Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/start-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Docker Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kết nối Server riêng
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kết nối Server riêng
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/1-create-account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo tài khoản
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/2-create-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo dịch vụ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/3-create-entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Entity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/4-push-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Đẩy dữ liệu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/5-create-card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Card
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/6-subscriptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Đăng ký
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Khởi động nhanh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kiến trúc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Khái niệm cốt lõi
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Khái niệm cốt lõi
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/orion-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orion Nginx Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/lego-dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lego Dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cài đặt
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cài đặt
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn cài đặt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thiết lập cục bộ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thiết lập Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Môi trường phát triển
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn sử dụng
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hướng dẫn sử dụng
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan hướng dẫn
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Làm việc với dữ liệu & Broker
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Làm việc với dữ liệu & Broker
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-luong-du-lieu-tong-the" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Luồng dữ liệu tổng thể
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-vai-tro-cua-context-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Vai trò của context broker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Vai trò của context broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-nhung-gi-uoc-luu-tru-trong-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Những gì được lưu trữ trong broker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-nhung-gi-khong-uoc-luu-tru-trong-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Những gì không được lưu trữ trong broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-cau-truc-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Cấu trúc broker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Cấu trúc broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-trien-khai-broker-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Triển khai broker đơn
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-trien-khai-nhieu-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Triển khai nhiều broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-domain-va-quyen-so-huu" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Domain và quyền sở hữu
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-update-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Update server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Update server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-trach-nhiem" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Trách nhiệm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-muc-o-chi-tiet-va-pham-vi" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Mức độ chi tiết và phạm vi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-idempotency-va-xu-ly-xung-ot" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Idempotency và xử lý xung đột
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-trang-thai-hien-tai-va-lich-su" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Trạng thái hiện tại và lịch sử
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Trạng thái hiện tại và lịch sử">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-trang-thai-hien-tai" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Trạng thái hiện tại
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-lich-su-va-xu-huong" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Lịch sử và xu hướng
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-hop-ong-du-lieu-va-quy-uoc" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Hợp đồng dữ liệu và quy ước
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Hợp đồng dữ liệu và quy ước">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-loai-entity-va-mo-hinh" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Loại entity và mô hình
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-inh-danh" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Định danh
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-thuoc-tinh-khong-gian-ia-ly" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Thuộc tính không gian địa lý
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-thuoc-tinh-thoi-gian" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Thuộc tính thời gian
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-nhieu-nguon-cho-cung-mot-loai-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Nhiều nguồn cho cùng một loại entity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-subscription-va-luong-phan-ung" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Subscription và luồng phản ứng
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-moi-quan-he-voi-dashboard-va-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Mối quan hệ với dashboard và proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-tom-tat" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Tóm tắt
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hiểu về Entities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Keys & Truy cập
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sample-update-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Server cập nhật mẫu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cấu hình
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cấu hình
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn cấu hình
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/data-sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nguồn dữ liệu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/api-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phát triển
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phát triển
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn phát triển
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/blocks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Blocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Viết Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/seed-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dữ liệu mẫu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tích hợp AI (Tùy chọn)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tích hợp AI (Tùy chọn)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nhà cung cấp hỗ trợ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/openrouter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenRouter (Models tùy chỉnh)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trường hợp sử dụng & Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Triển khai
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Triển khai
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan triển khai
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/vm-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtual Machines & Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Triển khai AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/cloudflare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloudflare
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/coolify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coolify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vận hành & Bảo trì
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tham khảo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tham khảo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Xử lý sự cố
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Open_Source_Checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Danh sách kiểm tra Open Source
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-luong-du-lieu-tong-the" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Luồng dữ liệu tổng thể
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-vai-tro-cua-context-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Vai trò của context broker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Vai trò của context broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-nhung-gi-uoc-luu-tru-trong-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Những gì được lưu trữ trong broker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-nhung-gi-khong-uoc-luu-tru-trong-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Những gì không được lưu trữ trong broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-cau-truc-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Cấu trúc broker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Cấu trúc broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-trien-khai-broker-on" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Triển khai broker đơn
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-trien-khai-nhieu-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Triển khai nhiều broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-domain-va-quyen-so-huu" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Domain và quyền sở hữu
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-update-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Update server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Update server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-trach-nhiem" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Trách nhiệm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-muc-o-chi-tiet-va-pham-vi" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Mức độ chi tiết và phạm vi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-idempotency-va-xu-ly-xung-ot" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Idempotency và xử lý xung đột
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-trang-thai-hien-tai-va-lich-su" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Trạng thái hiện tại và lịch sử
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Trạng thái hiện tại và lịch sử">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-trang-thai-hien-tai" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Trạng thái hiện tại
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-lich-su-va-xu-huong" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Lịch sử và xu hướng
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-hop-ong-du-lieu-va-quy-uoc" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Hợp đồng dữ liệu và quy ước
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Hợp đồng dữ liệu và quy ước">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-loai-entity-va-mo-hinh" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Loại entity và mô hình
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-inh-danh" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Định danh
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-thuoc-tinh-khong-gian-ia-ly" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Thuộc tính không gian địa lý
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-thuoc-tinh-thoi-gian" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Thuộc tính thời gian
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-nhieu-nguon-cho-cung-mot-loai-entity" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Nhiều nguồn cho cùng một loại entity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-subscription-va-luong-phan-ung" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Subscription và luồng phản ứng
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-moi-quan-he-voi-dashboard-va-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Mối quan hệ với dashboard và proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-tom-tat" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Tóm tắt
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="du-lieu-va-broker">Dữ liệu và broker</h1>
<p>Trang này giải thích chi tiết cách <strong>lớp dữ liệu</strong> của LegoCity được tổ chức xung quanh các NGSI-LD context broker và update server.</p>
<p>Trang này tập trung vào:</p>
<ul>
<li>broker dự kiến lưu trữ và cung cấp gì,</li>
<li>cách dữ liệu được nhóm thành các domain,</li>
<li>cách các update server được thiết kế và vận hành,</li>
<li>cách các quyết định về lịch sử, chất lượng và nguồn dữ liệu được đưa ra.</li>
</ul>
<p>Trang này không đề cập đến các lệnh triển khai hoặc tự động hóa cơ sở hạ tầng; những điều đó được ghi lại trong phần Triển khai.</p>
<hr />
<h2 id="1-luong-du-lieu-tong-the">1. Luồng dữ liệu tổng thể</h2>
<p>Luồng dữ liệu cơ bản trong triển khai LegoCity là:</p>
<ol>
<li>Một hệ thống bên ngoài (ví dụ: API thời tiết, gateway cảm biến, mô hình lũ lụt, nguồn cấp vận tải) expose dữ liệu thô.</li>
<li>Một update server cho domain đó đọc dữ liệu thô theo lịch trình.</li>
<li>Update server chuyển đổi dữ liệu thô thành <strong>NGSI-LD entity</strong> tuân theo các mô hình và quy ước đã thỏa thuận.</li>
<li>Update server ghi các entity đó vào một <strong>context broker</strong>.</li>
<li>Dashboard và các dịch vụ ứng dụng khác đọc entity từ broker (thường qua proxy) và biến chúng thành các lớp bản đồ và phần tử UI.</li>
</ol>
<p>Các ràng buộc quan trọng là:</p>
<ul>
<li>update server là các thành phần duy nhất ghi vào broker trong hoạt động bình thường,</li>
<li>broker là nguồn duy nhất mà dashboard đọc ngữ cảnh thành phố,</li>
<li>nếu một cái gì đó không có trong broker, nó không tồn tại từ quan điểm của LegoCity.</li>
</ul>
<hr />
<h2 id="2-vai-tro-cua-context-broker">2. Vai trò của context broker</h2>
<p>Context broker chịu trách nhiệm cho:</p>
<ul>
<li>lưu trữ tất cả <strong>trạng thái hiện tại</strong> của các entity thành phố mà LegoCity cần,</li>
<li>expose một API NGSI-LD chuẩn để tạo, cập nhật, truy vấn và subscription,</li>
<li>cung cấp một view nhất quán, chuẩn hóa về "thành phố trông như thế nào hiện tại".</li>
</ul>
<p>Từ quan điểm của LegoCity, broker phải:</p>
<ul>
<li>lưu trữ entity cho tất cả các domain trong phạm vi (ví dụ: môi trường, lũ lụt, di chuyển, dịch vụ công),</li>
<li>hỗ trợ các truy vấn không gian địa lý và lọc trên các thuộc tính mà UI sẽ cần,</li>
<li>xử lý khối lượng và tần suất cập nhật dự kiến của các entity.</li>
</ul>
<p>Broker không được mong đợi để:</p>
<ul>
<li>thực hiện phân tích nặng,</li>
<li>render bản đồ,</li>
<li>nhận biết các khái niệm UI như trang, khối hoặc quyền bên trong dashboard.</li>
</ul>
<p>Những mối quan tâm đó là bên ngoài broker.</p>
<h3 id="21-nhung-gi-uoc-luu-tru-trong-broker">2.1 Những gì được lưu trữ trong broker</h3>
<p>Đối với mỗi domain, broker lưu trữ:</p>
<ul>
<li>định danh entity đại diện cho các đối tượng hoặc quan sát trong thế giới thực,</li>
<li>giá trị hiện tại của các thuộc tính (trạng thái, đo lường, năng lực, v.v.),</li>
<li>thuộc tính không gian địa lý (vị trí, hình học, khu vực bao phủ),</li>
<li>timestamp cho biết thông tin được quan sát hoặc cập nhật lần cuối khi nào.</li>
</ul>
<p>Ví dụ về những gì nằm trong phạm vi của broker:</p>
<ul>
<li>"Có một vùng lũ lụt với đa giác này và mức độ rủi ro hiện tại này."</li>
<li>"Có một cơ sở đỗ xe với sức chứa này và tỷ lệ lấp đầy hiện tại này."</li>
<li>"Có một quan sát thời tiết tại vị trí này với nhiệt độ và độ ẩm này."</li>
</ul>
<p>Nếu dashboard cần hiển thị một giá trị cho người dùng, giá trị đó phải có hoặc có thể suy ra từ các entity trong broker.</p>
<h3 id="22-nhung-gi-khong-uoc-luu-tru-trong-broker">2.2 Những gì không được lưu trữ trong broker</h3>
<p>Broker không bắt buộc phải lưu trữ:</p>
<ul>
<li>cấu hình UI (kiểu bản đồ, giá trị mặc định hiển thị lớp, bố cục panel),</li>
<li>tài khoản người dùng, vai trò hoặc quyền,</li>
<li>tài liệu hoặc văn bản mô tả chỉ liên quan đến UI quản trị.</li>
</ul>
<p>Các mục này thuộc về PayloadCMS hoặc các phần khác của stack LegoCity.</p>
<hr />
<h2 id="3-cau-truc-broker">3. Cấu trúc broker</h2>
<p>Một triển khai LegoCity phải chọn chạy bao nhiêu broker và mỗi broker chịu trách nhiệm về gì. Đây là một quyết định cấu trúc ảnh hưởng đến mọi phần khác của hệ thống.</p>
<h3 id="31-trien-khai-broker-on">3.1 Triển khai broker đơn</h3>
<p>Trong triển khai broker đơn:</p>
<ul>
<li>một instance broker lưu trữ tất cả các entity cho triển khai (tất cả các domain, tất cả các khu vực thành phố),</li>
<li>tất cả các update server ghi vào broker đó,</li>
<li>tất cả các dashboard và dịch vụ ứng dụng đọc từ broker đó.</li>
</ul>
<p>Đây thường là mặc định cho:</p>
<ul>
<li>bằng chứng về khái niệm,</li>
<li>triển khai nhỏ đến trung bình,</li>
<li>một thành phố hoặc khuôn viên duy nhất.</li>
</ul>
<p>Ưu điểm:</p>
<ul>
<li>ít endpoint hơn để cấu hình,</li>
<li>giám sát và logging đơn giản hơn,</li>
<li>dễ dàng hơn cho các thành viên mới trong nhóm để hiểu.</li>
</ul>
<p>Rủi ro và ràng buộc:</p>
<ul>
<li>nếu broker không khả dụng, tất cả các domain đều bị ảnh hưởng,</li>
<li>tất cả các domain chia sẻ cùng một giới hạn hiệu suất và mở rộng,</li>
<li>cần đặt tên và phạm vi cẩn thận để tránh xung đột giữa các domain.</li>
</ul>
<p>Trong thực tế, một triển khai broker đơn vẫn nên tách các môi trường (ví dụ: một broker cho development và một cho production).</p>
<h3 id="32-trien-khai-nhieu-broker">3.2 Triển khai nhiều broker</h3>
<p>Trong triển khai nhiều broker, các broker khác nhau được sử dụng cho các phạm vi khác nhau. Các mẫu phổ biến:</p>
<ul>
<li>một broker cho mỗi môi trường (development, staging, production),</li>
<li>một broker cho mỗi thành phố hoặc khu vực hành chính,</li>
<li>một broker cho telemetry tần suất cao và một broker khác cho dữ liệu tham chiếu tĩnh hơn.</li>
</ul>
<p>Ưu điểm:</p>
<ul>
<li>tách biệt rõ ràng hơn giữa các môi trường hoặc thành phố,</li>
<li>chính sách điều chỉnh và lưu giữ khác nhau cho mỗi broker,</li>
<li>lỗi trong một broker không ảnh hưởng ngay lập tức đến tất cả các domain.</li>
</ul>
<p>Chi phí và ràng buộc:</p>
<ul>
<li>nhiều endpoint và thông tin xác thực hơn để quản lý,</li>
<li>các update server phải biết ghi vào broker nào,</li>
<li>dashboard và proxy phải được cấu hình để truy vấn broker chính xác cho mỗi ngữ cảnh.</li>
</ul>
<p>Tài liệu của triển khai LegoCity nên liệt kê rõ ràng:</p>
<ul>
<li>mỗi instance broker (tên và URL cơ sở),</li>
<li>domain và loại entity nào mà mỗi broker sở hữu,</li>
<li>update server và ứng dụng nào được phép truy cập mỗi broker.</li>
</ul>
<hr />
<h2 id="4-domain-va-quyen-so-huu">4. Domain và quyền sở hữu</h2>
<p>Không có cấu trúc, một broker có thể trở thành một tập hợp ngẫu nhiên các entity. LegoCity khuyến khích nhóm các entity thành <strong>domain</strong> và gán trách nhiệm rõ ràng.</p>
<p>Các domain điển hình là:</p>
<ul>
<li>Môi trường (thời tiết, chất lượng không khí, tiếng ồn),</li>
<li>Nước và lũ lụt,</li>
<li>Di chuyển và vận tải,</li>
<li>Dịch vụ công (y tế, giáo dục, hành chính),</li>
<li>Tài sản cơ sở hạ tầng (đỗ xe, trạm sạc, camera).</li>
</ul>
<p>Đối với mỗi domain, tài liệu nên nêu rõ:</p>
<ul>
<li>loại entity nào thuộc về nó (theo tên <code>type</code>),</li>
<li>update server nào chịu trách nhiệm tạo và cập nhật các entity đó,</li>
<li>instance broker nào lưu trữ các entity đó,</li>
<li>dashboard hoặc view bản đồ nào tiêu thụ domain đó.</li>
</ul>
<p>Điều này đưa ra câu trả lời rõ ràng cho các câu hỏi như:</p>
<ul>
<li>"Nếu dữ liệu lũ lụt sai, chúng ta nên kiểm tra server nào?"</li>
<li>"Dữ liệu chất lượng không khí đến từ đâu?"</li>
<li>"Nếu chúng ta thêm một thành phố mới, domain nào cần broker mới hoặc server mới?"</li>
</ul>
<p>Domain là một khái niệm tài liệu và quyền sở hữu; chúng không phải là một thành phần kỹ thuật mới.</p>
<hr />
<h2 id="5-update-server">5. Update server</h2>
<p>Update server là <strong>dịch vụ tích hợp</strong>. Chúng kết nối các hệ thống bên ngoài với context broker và là các writer thường xuyên duy nhất của các entity.</p>
<h3 id="51-trach-nhiem">5.1 Trách nhiệm</h3>
<p>Một update server chịu trách nhiệm cho một vòng lặp hoàn chỉnh:</p>
<ol>
<li>
<p><strong>Cấu hình</strong><br />
   Nó đọc tất cả cấu hình của nó từ các biến môi trường hoặc file cấu hình, bao gồm:</p>
</li>
<li>
<p>URL broker và thông tin xác thực,</p>
</li>
<li>endpoint API bên ngoài và khóa,</li>
<li>
<p>tần suất cập nhật và bất kỳ tham số domain-specific nào (ví dụ: danh sách các vị trí để giám sát).</p>
</li>
<li>
<p><strong>Thu thập dữ liệu</strong><br />
   Nó liên hệ với các nguồn dữ liệu bên ngoài:</p>
</li>
<li>
<p>lấy dữ liệu thô,</p>
</li>
<li>xử lý phân trang, giới hạn tốc độ và lỗi tạm thời,</li>
<li>
<p>xác thực rằng dữ liệu nhận được có cấu trúc hợp lệ.</p>
</li>
<li>
<p><strong>Chuyển đổi</strong><br />
   Nó chuyển đổi dữ liệu thô thành biểu diễn entity nội bộ:</p>
</li>
<li>
<p>chọn loại entity,</p>
</li>
<li>đặt định danh theo các quy ước của dự án,</li>
<li>điền các thuộc tính khớp với Smart Data Model đã chọn,</li>
<li>
<p>đặt vị trí và timestamp.</p>
</li>
<li>
<p><strong>Xuất bản</strong><br />
   Nó ghi entity vào broker:</p>
</li>
<li>
<p>tạo các entity chưa tồn tại,</p>
</li>
<li>cập nhật thuộc tính cho các entity hiện có,</li>
<li>
<p>xử lý các lỗi một phần và retry khi thích hợp.</p>
</li>
<li>
<p><strong>Báo cáo và sức khỏe</strong><br />
   Nó ghi log các sự kiện chính:</p>
</li>
<li>bao nhiêu entity đã được tạo hoặc cập nhật,</li>
<li>khi nào cập nhật thành công lần cuối xảy ra,</li>
<li>có lỗi hay không và loại gì.</li>
</ol>
<p>Vòng lặp này có thể được triển khai như một dịch vụ chạy liên tục với một bộ đếm thời gian hoặc như một công việc được lên lịch.</p>
<h3 id="52-muc-o-chi-tiet-va-pham-vi">5.2 Mức độ chi tiết và phạm vi</h3>
<p>Phương pháp được khuyến nghị là giữ các update server có phạm vi hẹp:</p>
<ul>
<li>một server cho mỗi nguồn dữ liệu bên ngoài,</li>
<li>hoặc một server cho mỗi domain khi các nguồn được liên kết chặt chẽ.</li>
</ul>
<p>Điều này tránh:</p>
<ul>
<li>trộn lẫn các mối quan tâm không liên quan trong một codebase duy nhất,</li>
<li>làm cho một lỗi ảnh hưởng đến nhiều domain,</li>
<li>tạo ra các coupling ẩn khó debug.</li>
</ul>
<p>Mỗi server nên có một tên rõ ràng và phạm vi được ghi lại, ví dụ:</p>
<ul>
<li><code>env-weather-server</code> – đọc API thời tiết, ghi <code>WeatherObserved</code>,</li>
<li><code>water-flood-server</code> – đọc đầu ra mô hình lũ lụt, ghi <code>FloodZone</code>,</li>
<li><code>mobility-parking-server</code> – đọc backend đỗ xe, ghi <code>ParkingFacility</code> và <code>ParkingSpot</code>.</li>
</ul>
<h3 id="53-idempotency-va-xu-ly-xung-ot">5.3 Idempotency và xử lý xung đột</h3>
<p>Update server nên được thiết kế để <strong>idempotent</strong>:</p>
<ul>
<li>chạy cùng một cập nhật hai lần liên tiếp không nên tạo các entity trùng lặp,</li>
<li>các cập nhật nên luôn hội tụ về trạng thái chính xác.</li>
</ul>
<p>Điều này có ý nghĩa đối với:</p>
<ul>
<li>cách tạo ID (ID ổn định vs ID ngẫu nhiên mới),</li>
<li>cách áp dụng cập nhật (replace vs patch),</li>
<li>cách xử lý các entity đã xóa hoặc lỗi thời (xóa rõ ràng, hoặc đánh dấu là không hoạt động).</li>
</ul>
<p>Dự án nên xác định cách biểu diễn việc xóa và vô hiệu hóa, để UI có thể diễn giải chúng một cách chính xác (ví dụ: các entity không hoạt động có bị ẩn hay được tạo kiểu khác đi).</p>
<hr />
<h2 id="6-trang-thai-hien-tai-va-lich-su">6. Trạng thái hiện tại và lịch sử</h2>
<p>Các NGSI-LD broker có thể hỗ trợ cả truy vấn <strong>ngữ cảnh hiện tại</strong> và <strong>temporal</strong>, nhưng LegoCity phải xác định cách sử dụng khả năng này.</p>
<h3 id="61-trang-thai-hien-tai">6.1 Trạng thái hiện tại</h3>
<p>Đối với nhiều dashboard, chỉ trạng thái hiện tại quan trọng. Ví dụ:</p>
<ul>
<li>mức nước hiện tại,</li>
<li>tỷ lệ lấp đầy đỗ xe hiện tại,</li>
<li>mức độ rủi ro lũ lụt hiện tại.</li>
</ul>
<p>Trong chế độ này:</p>
<ul>
<li>broker giữ một entity cho mỗi đối tượng trong thế giới thực,</li>
<li>mỗi cập nhật ghi đè các thuộc tính có liên quan,</li>
<li>các giá trị cũ không được giữ trong broker.</li>
</ul>
<p>Điều này đơn giản hơn để vận hành và thường đủ cho các trường hợp sử dụng theo kiểu giám sát.</p>
<h3 id="62-lich-su-va-xu-huong">6.2 Lịch sử và xu hướng</h3>
<p>Đối với một số trường hợp sử dụng, LegoCity có thể cần lịch sử ngắn hạn, ví dụ:</p>
<ul>
<li>biểu đồ của 24 giờ gần đây về thời tiết hoặc chất lượng không khí,</li>
<li>sự phát triển gần đây của mức nước trong một sự kiện lũ lụt.</li>
</ul>
<p>Hai phương pháp có thể:</p>
<ul>
<li>sử dụng các tính năng temporal của broker (nếu có và được bật) để lưu trữ lịch sử thuộc tính,</li>
<li>chuyển tiếp dữ liệu sang một cơ sở dữ liệu chuỗi thời gian chuyên biệt trong khi chỉ giữ các giá trị mới nhất trong broker.</li>
</ul>
<p>Lựa chọn nên được ghi lại cho mỗi domain:</p>
<ul>
<li>domain nào chỉ lưu trữ trạng thái hiện tại,</li>
<li>domain nào giữ lại lịch sử hạn chế,</li>
<li>dữ liệu phân tích dài hạn được lưu trữ ở đâu nếu không có trong broker.</li>
</ul>
<p>Dashboard và proxy phải được căn chỉnh với quyết định này để các truy vấn thực tế và hiệu quả.</p>
<hr />
<h2 id="7-hop-ong-du-lieu-va-quy-uoc">7. Hợp đồng dữ liệu và quy ước</h2>
<p>Để giữ lớp dữ liệu mạch lạc, LegoCity dựa vào các <strong>hợp đồng dữ liệu</strong> rõ ràng giữa các update server, broker và UI.</p>
<p>Các hợp đồng này bao gồm:</p>
<ul>
<li>loại entity nào được sử dụng,</li>
<li>thuộc tính nào phải có,</li>
<li>quy ước đặt tên nào được tuân theo.</li>
</ul>
<h3 id="71-loai-entity-va-mo-hinh">7.1 Loại entity và mô hình</h3>
<p>Đối với mỗi loại entity được sử dụng trong LegoCity, tài liệu nên chỉ định:</p>
<ul>
<li>tên của loại entity (ví dụ: <code>WeatherObserved</code>),</li>
<li>liệu nó tuân theo FIWARE Smart Data Model trực tiếp, một phiên bản mở rộng, hay một schema tùy chỉnh,</li>
<li>thuộc tính nào là bắt buộc (phải luôn có),</li>
<li>thuộc tính nào là tùy chọn và trong điều kiện nào chúng xuất hiện.</li>
</ul>
<p>Update server phải tôn trọng các định nghĩa này khi tạo hoặc cập nhật entity.</p>
<h3 id="72-inh-danh">7.2 Định danh</h3>
<p>Định danh (<code>id</code>) cần phải:</p>
<ul>
<li>ổn định theo thời gian cho cùng một đối tượng hoặc vị trí trong thế giới thực,</li>
<li>đủ dự đoán được để các hệ thống có thể tham chiếu đến entity bằng ID nếu cần,</li>
<li>duy nhất trong broker, hoặc ít nhất trong một domain.</li>
</ul>
<p>Tài liệu nên nêu rõ:</p>
<ul>
<li>cách xây dựng ID (ví dụ: các mẫu URN bao gồm domain và vị trí),</li>
<li>liệu ID có được lấy từ định danh bên ngoài hay được tạo nội bộ,</li>
<li>cách xử lý thay đổi ID nếu một hệ thống bên ngoài đổi tên một cái gì đó.</li>
</ul>
<h3 id="73-thuoc-tinh-khong-gian-ia-ly">7.3 Thuộc tính không gian địa lý</h3>
<p>Vì LegoCity tập trung vào bản đồ, các thuộc tính không gian địa lý phải nhất quán:</p>
<ul>
<li>tên thuộc tính nào được sử dụng cho vị trí (ví dụ: luôn luôn là <code>location</code>),</li>
<li>loại hình học nào được mong đợi cho mỗi loại entity (điểm, đường, đa giác),</li>
<li>cách xử lý hệ thống tham chiếu tọa độ (thường là WGS84).</li>
</ul>
<p>Sự nhất quán này cho phép:</p>
<ul>
<li>các lớp bản đồ chung có thể xử lý nhiều loại entity,</li>
<li>lọc đơn giản theo bounding box hoặc khu vực quan tâm.</li>
</ul>
<h3 id="74-thuoc-tinh-thoi-gian">7.4 Thuộc tính thời gian</h3>
<p>Thời gian rất quan trọng đối với ngữ cảnh:</p>
<ul>
<li>mỗi entity kiểu quan sát nên có một timestamp quan sát rõ ràng,</li>
<li>các entity đại diện cho các đối tượng tĩnh (ví dụ: một cơ sở công) có thể có timestamp tạo hoặc cập nhật lần cuối.</li>
</ul>
<p>Tài liệu nên liệt kê:</p>
<ul>
<li>thuộc tính nào mang thông tin thời gian,</li>
<li>cách chúng được sử dụng trong UI (ví dụ: để đánh dấu dữ liệu cũ).</li>
</ul>
<hr />
<h2 id="8-nhieu-nguon-cho-cung-mot-loai-entity">8. Nhiều nguồn cho cùng một loại entity</h2>
<p>Đôi khi nhiều hơn một nguồn bên ngoài có thể cung cấp dữ liệu cho cùng một loại entity khái niệm. Ví dụ: các cơ quan khác nhau có thể xuất bản các bản đồ lũ lụt chồng chéo một phần.</p>
<p>Trong những trường hợp như vậy, LegoCity cần các quy tắc rõ ràng để tránh nhầm lẫn:</p>
<ul>
<li>liệu một nguồn có được coi là nguồn <strong>có thẩm quyền</strong> và các nguồn khác bị bỏ qua,</li>
<li>liệu các entity từ các nguồn khác nhau có được giữ riêng biệt bằng ID và metadata,</li>
<li>liệu một dịch vụ tổng hợp chuyên dụng có kết hợp dữ liệu từ nhiều nguồn thành một tập entity duy nhất.</li>
</ul>
<p>Nếu nhiều nguồn được sử dụng, tài liệu nên chỉ định cho mỗi loại entity:</p>
<ul>
<li>nguồn nào cung cấp loại này,</li>
<li>cách giải quyết xung đột,</li>
<li>thuộc tính nào cho biết nguồn gốc hoặc chất lượng của mỗi entity.</li>
</ul>
<hr />
<h2 id="9-subscription-va-luong-phan-ung">9. Subscription và luồng phản ứng</h2>
<p>NGSI-LD hỗ trợ subscription để các dịch vụ có thể được thông báo khi entity thay đổi. LegoCity có thể sử dụng subscription để thúc đẩy các quy trình backend, nhưng không phải như một cơ chế chính cho dashboard.</p>
<p>Các cách sử dụng có thể bao gồm:</p>
<ul>
<li>một dịch vụ cập nhật các chỉ số tổng hợp khi các entity cảm biến thay đổi,</li>
<li>một thành phần giám sát cảnh báo khi vượt qua một số ngưỡng nhất định.</li>
</ul>
<p>Nếu subscription được sử dụng:</p>
<ul>
<li>các thành phần tạo và quản lý subscription nên được xác định,</li>
<li>phạm vi của subscription (loại entity nào, điều kiện nào) nên được ghi lại,</li>
<li>các chiến lược xử lý lỗi và khôi phục nên được xác định (điều gì xảy ra khi việc gửi thông báo thất bại).</li>
</ul>
<p>Dashboard được mong đợi tiếp tục sử dụng các truy vấn bình thường; bất kỳ logic "push" nào nên được trung gian bởi các dịch vụ ứng dụng.</p>
<hr />
<h2 id="10-moi-quan-he-voi-dashboard-va-proxy">10. Mối quan hệ với dashboard và proxy</h2>
<p>Lớp dữ liệu và lớp UI giao tiếp thông qua một giao diện hẹp.</p>
<p>Trong một thiết lập điển hình:</p>
<ul>
<li>lớp proxy expose một tập nhỏ các endpoint HTTP được tùy chỉnh cho UI,</li>
<li>các endpoint này truy vấn broker nội bộ bằng NGSI-LD và chiếu các kết quả thành các cấu trúc đơn giản hơn,</li>
<li>dashboard gọi các endpoint này để lấy dữ liệu cần thiết cho các view bản đồ và khối.</li>
</ul>
<p>Hệ quả:</p>
<ul>
<li>các chi tiết nội bộ của broker không được expose trực tiếp ra trình duyệt hoặc client không đáng tin cậy,</li>
<li>các thay đổi trong cấu trúc entity có thể được hấp thụ bởi proxy mà không phá vỡ ngay lập tức UI,</li>
<li>các chính sách bảo mật (ai có thể đọc gì) có thể được triển khai ở một nơi.</li>
</ul>
<p>Thiết kế của các proxy endpoint này được ghi lại trong phần Development; từ quan điểm lớp dữ liệu, chỉ cần hiểu rằng:</p>
<ul>
<li>quyền truy cập đọc được tập trung,</li>
<li>quyền truy cập ghi vẫn với các update server,</li>
<li>broker vẫn là nguồn dữ liệu duy nhất.</li>
</ul>
<hr />
<h2 id="11-tom-tat">11. Tóm tắt</h2>
<ul>
<li>Context broker lưu trữ biểu diễn hiện tại của thành phố dưới dạng các NGSI-LD entity và được coi là nguồn dữ liệu.</li>
<li>Một triển khai phải chọn và ghi lại cấu trúc broker của nó (broker đơn hoặc nhiều broker) và cấu trúc domain.</li>
<li>Domain nhóm các loại entity liên quan và update server; mỗi domain có quyền sở hữu và trách nhiệm rõ ràng.</li>
<li>Update server là các writer thường xuyên duy nhất vào broker và phải tuân theo các hợp đồng dữ liệu được chia sẻ cho cấu trúc entity, định danh, thuộc tính không gian địa lý và timestamp.</li>
<li>Các quyết định về lịch sử, lưu giữ và nhiều nguồn dữ liệu phải rõ ràng để dashboard và phân tích hoạt động dự đoán được.</li>
<li>Dashboard đọc từ broker thông qua proxy, giữ các mối quan tâm UI được tách biệt rõ ràng khỏi việc thu thập và lưu trữ dữ liệu.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Trở lại mục lục
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u0110\u00e3 sao ch\u00e9p", "clipboard.copy": "Sao ch\u00e9p v\u00e0o b\u1ed9 nh\u1edb t\u1ea1m", "search.result.more.one": "1 t\u1eeb kh\u00e1c trong trang", "search.result.more.other": "# t\u1eeb kh\u00e1c trong trang", "search.result.none": "Kh\u00f4ng t\u00ecm th\u1ea5y t\u00e0i li\u1ec7u li\u00ean quan", "search.result.one": "1 t\u00e0i li\u1ec7u li\u00ean quan", "search.result.other": "# t\u00e0i li\u1ec7u li\u00ean quan", "search.result.placeholder": "Nh\u1eadp \u0111\u1ec3 b\u1eaft \u0111\u1ea7u t\u00ecm ki\u1ebfm", "search.result.term.missing": "Kh\u00f4ng", "select.version": "Ch\u1ecdn phi\u00ean b\u1ea3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>