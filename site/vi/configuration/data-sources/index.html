
<!doctype html>
<html lang="vi" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ctu-sematx.github.io/LegoCity/vi/configuration/data-sources/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../api-keys/">
      
      
        
          <link rel="alternate" href="../../../configuration/data-sources/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="vi">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Nguồn dữ liệu - LegoCity Smart City Builder</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Merriweather Sans";--md-code-font:"Red Hat Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-and-brokers" class="md-skip">
          Bỏ qua
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Đầu trang">
    <a href="../../" title="LegoCity Smart City Builder" class="md-header__button md-logo" aria-label="LegoCity Smart City Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LegoCity Smart City Builder
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nguồn dữ liệu
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Chọn ngôn ngữ">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../configuration/data-sources/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="vi" class="md-select__link">
              Tiếng Việt
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Tìm kiếm" placeholder="Tìm kiếm" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Tìm kiếm">
        
        <button type="reset" class="md-search__icon md-icon" title="Xoá" aria-label="Xoá" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CTU-SematX/LegoCity" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    CTU-SematX/LegoCity
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  Trang chủ

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about-sematx/" class="md-tabs__link">
          
  
  
  Về SematX

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
  Bắt đầu

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../core-concepts/overview/" class="md-tabs__link">
          
  
  
  Khái niệm cốt lõi

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/" class="md-tabs__link">
          
  
  
  Cài đặt

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/" class="md-tabs__link">
          
  
  
  Hướng dẫn sử dụng

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Cấu hình

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/" class="md-tabs__link">
          
  
  
  Phát triển

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ai/overview/" class="md-tabs__link">
          
  
  
  Tích hợp AI (Tùy chọn)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/" class="md-tabs__link">
          
  
  
  Triển khai

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/troubleshooting/" class="md-tabs__link">
          
  
  
  Tham khảo

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Thanh điều hướng" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="LegoCity Smart City Builder" class="md-nav__button md-logo" aria-label="LegoCity Smart City Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LegoCity Smart City Builder
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CTU-SematX/LegoCity" title="Xem mã nguồn" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    CTU-SematX/LegoCity
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trang chủ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Về SematX
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Về SematX
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/ecosystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hệ sinh thái
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about-sematx/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Công cụ & Công nghệ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bắt đầu
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bắt đầu
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Khởi động Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Khởi động Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/start-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Docker Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kết nối Server riêng
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kết nối Server riêng
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/1-create-account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo tài khoản
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/2-create-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo dịch vụ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/3-create-entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Entity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/4-push-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Đẩy dữ liệu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/5-create-card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Card
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/bring-your-own-server/6-subscriptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Đăng ký
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Khởi động nhanh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kiến trúc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Khái niệm cốt lõi
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Khái niệm cốt lõi
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/orion-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orion Nginx Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core-concepts/lego-dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lego Dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cài đặt
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cài đặt
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn cài đặt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thiết lập cục bộ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thiết lập Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Môi trường phát triển
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn sử dụng
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hướng dẫn sử dụng
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan hướng dẫn
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/data-and-brokers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Làm việc với dữ liệu & Broker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hiểu về Entities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/api-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Keys & Truy cập
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/sample-update-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Server cập nhật mẫu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Cấu hình
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cấu hình
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn cấu hình
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Nguồn dữ liệu
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Nguồn dữ liệu
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overall-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overall data flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-context-broker-role" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Context broker role
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Context broker role">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-what-is-stored-in-the-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 What is stored in the broker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-what-is-not-stored-in-the-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 What is not stored in the broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-broker-topology" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Broker topology
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Broker topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-single-broker-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Single-broker deployments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-multi-broker-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Multi-broker deployments
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-domains-and-ownership" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Domains and ownership
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-update-servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Update servers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Update servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-granularity-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Granularity and scope
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-idempotency-and-conflict-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Idempotency and conflict handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-current-state-and-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Current state and history
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Current state and history">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-current-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Current state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-history-and-trends" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 History and trends
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-data-contracts-and-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Data contracts and conventions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Data contracts and conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-entity-types-and-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Entity types and models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Identifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-geospatial-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Geospatial attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-time-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Time attributes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-multiple-sources-for-the-same-entity-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Multiple sources for the same entity type
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-subscriptions-and-reactive-flows" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Subscriptions and reactive flows
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-relationship-to-the-dashboard-and-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Relationship to the dashboard and proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phát triển
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phát triển
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hướng dẫn phát triển
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/blocks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tạo Blocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Viết Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/seed-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dữ liệu mẫu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tích hợp AI (Tùy chọn)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tích hợp AI (Tùy chọn)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nhà cung cấp hỗ trợ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/openrouter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenRouter (Models tùy chỉnh)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trường hợp sử dụng & Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Triển khai
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Triển khai
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tổng quan triển khai
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/vm-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtual Machines & Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Triển khai AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/cloudflare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloudflare
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/coolify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coolify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vận hành & Bảo trì
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tham khảo
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tham khảo
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Xử lý sự cố
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Open_Source_Checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Danh sách kiểm tra Open Source
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Mục lục">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Mục lục
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overall-data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overall data flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-context-broker-role" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Context broker role
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Context broker role">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-what-is-stored-in-the-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 What is stored in the broker
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-what-is-not-stored-in-the-broker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 What is not stored in the broker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-broker-topology" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Broker topology
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Broker topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-single-broker-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Single-broker deployments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-multi-broker-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Multi-broker deployments
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-domains-and-ownership" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Domains and ownership
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-update-servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Update servers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Update servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-granularity-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Granularity and scope
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-idempotency-and-conflict-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Idempotency and conflict handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-current-state-and-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Current state and history
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Current state and history">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-current-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Current state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-history-and-trends" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 History and trends
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-data-contracts-and-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Data contracts and conventions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Data contracts and conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-entity-types-and-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Entity types and models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Identifiers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-geospatial-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Geospatial attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-time-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Time attributes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-multiple-sources-for-the-same-entity-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Multiple sources for the same entity type
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-subscriptions-and-reactive-flows" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Subscriptions and reactive flows
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-relationship-to-the-dashboard-and-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Relationship to the dashboard and proxy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Summary
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="data-and-brokers">Data and brokers</h1>
<p>Trang này giải thích chi tiết cách <strong>tầng dữ liệu (data layer)</strong> của LegoCity được tổ chức xung quanh <strong>NGSI-LD context broker</strong> và <strong>update server</strong>.</p>
<p>Tập trung vào:</p>
<ul>
<li>broker cần lưu trữ và cung cấp những gì,</li>
<li>dữ liệu được nhóm thành <strong>domain</strong> như thế nào,</li>
<li>cách thiết kế và vận hành <strong>update server</strong>,</li>
<li>cách ra quyết định về <strong>history</strong>, <strong>chất lượng dữ liệu</strong> và <strong>source-of-truth</strong>.</li>
</ul>
<p>Trang này <strong>không</strong> đề cập lệnh triển khai hay tự động hóa hạ tầng; những phần đó được mô tả trong mục <em>Deployment</em>.</p>
<hr />
<h2 id="1-overall-data-flow">1. Overall data flow</h2>
<p>Luồng dữ liệu cơ bản trong một deployment LegoCity:</p>
<ol>
<li>Một hệ thống bên ngoài (ví dụ: weather API, sensor gateway, mô hình lũ, luồng dữ liệu giao thông) cung cấp dữ liệu thô (raw data).</li>
<li>Một <strong>update server</strong> cho domain đó đọc dữ liệu thô theo lịch (schedule).</li>
<li>Update server chuyển dữ liệu thô thành các <strong>NGSI-LD entity</strong> tuân theo các model và convention đã thống nhất.</li>
<li>Update server ghi các entity đó vào <strong>context broker</strong>.</li>
<li>Dashboard và các dịch vụ ứng dụng khác đọc entity từ broker (thường thông qua một <strong>proxy</strong>) và chuyển chúng thành các lớp bản đồ (map layer) và thành phần UI.</li>
</ol>
<p>Những ràng buộc quan trọng:</p>
<ul>
<li>trong vận hành bình thường, <strong>chỉ update server</strong> mới ghi (write) vào broker,</li>
<li><strong>broker là nguồn duy nhất</strong> mà dashboard dùng để đọc city context,</li>
<li>nếu một thứ <strong>không nằm trong broker</strong> thì nó <strong>coi như không tồn tại</strong> từ góc nhìn của LegoCity.</li>
</ul>
<hr />
<h2 id="2-context-broker-role">2. Context broker role</h2>
<p><strong>Context broker</strong> chịu trách nhiệm:</p>
<ul>
<li>lưu trữ toàn bộ <strong>trạng thái hiện tại (current state)</strong> của các city entity mà LegoCity cần,</li>
<li>cung cấp một NGSI-LD API chuẩn cho create, update, query và subscription,</li>
<li>cung cấp một góc nhìn nhất quán, chuẩn hóa (canonical) về “thành phố trông như thế nào ngay bây giờ”.</li>
</ul>
<p>Từ góc nhìn LegoCity, broker phải:</p>
<ul>
<li>lưu trữ entity cho tất cả các domain nằm trong phạm vi (ví dụ: environment, flooding, mobility, public services),</li>
<li>hỗ trợ <strong>geospatial query</strong> và lọc theo các thuộc tính (attribute) mà UI sẽ cần,</li>
<li>xử lý được volume và tần suất cập nhật dự kiến của các entity.</li>
</ul>
<p>Broker <strong>không</strong> được kỳ vọng sẽ:</p>
<ul>
<li>thực hiện các phân tích nặng (heavy analytics),</li>
<li>render bản đồ,</li>
<li>hiểu các khái niệm UI như page, block hay permission bên trong dashboard.</li>
</ul>
<p>Những mối quan tâm đó thuộc về các thành phần ngoài broker.</p>
<h3 id="21-what-is-stored-in-the-broker">2.1 What is stored in the broker</h3>
<p>Với mỗi domain, broker lưu trữ:</p>
<ul>
<li><strong>entity identifier</strong> biểu diễn các đối tượng hoặc quan trắc (observation) trong thế giới thực,</li>
<li>giá trị hiện tại của các attribute (status, measurement, capacity, …),</li>
<li>các thuộc tính không gian (geospatial attributes: location, geometry, coverage area),</li>
<li>timestamp cho biết thời điểm thông tin được quan sát hoặc được cập nhật lần cuối.</li>
</ul>
<p>Ví dụ những thứ thuộc phạm vi broker:</p>
<ul>
<li>“Có một flood zone với polygon này và mức độ rủi ro hiện tại này.”</li>
<li>“Có một parking facility với sức chứa này và mức độ chiếm dụng hiện tại này.”</li>
<li>“Có một weather observation tại vị trí này với nhiệt độ và độ ẩm như sau.”</li>
</ul>
<p>Nếu dashboard cần hiển thị một giá trị cho người dùng, giá trị đó phải <strong>có mặt</strong> hoặc <strong>suy ra được</strong> từ các entity trong broker.</p>
<h3 id="22-what-is-not-stored-in-the-broker">2.2 What is not stored in the broker</h3>
<p>Broker <strong>không bắt buộc</strong> phải lưu:</p>
<ul>
<li>cấu hình UI (map style, default visibility của layer, bố cục panel),</li>
<li>tài khoản người dùng, role hay permission,</li>
<li>tài liệu hoặc nội dung mô tả chỉ liên quan tới admin UI.</li>
</ul>
<p>Những thứ này thuộc về <strong>PayloadCMS</strong> hoặc các phần khác trong LegoCity stack.</p>
<hr />
<h2 id="3-broker-topology">3. Broker topology</h2>
<p>Một deployment LegoCity phải quyết định chạy bao nhiêu <strong>broker</strong> và mỗi broker chịu trách nhiệm gì. Đây là quyết định mang tính cấu trúc, ảnh hưởng đến mọi phần khác của hệ thống.</p>
<h3 id="31-single-broker-deployments">3.1 Single-broker deployments</h3>
<p>Trong một deployment <strong>single-broker</strong>:</p>
<ul>
<li>một instance broker lưu tất cả entity của deployment (tất cả domain, tất cả khu vực),</li>
<li>tất cả update server ghi vào broker đó,</li>
<li>tất cả dashboard và application service đọc từ broker đó.</li>
</ul>
<p>Cách này thường được dùng mặc định cho:</p>
<ul>
<li>proof of concept,</li>
<li>các deployment nhỏ đến vừa,</li>
<li>một thành phố hoặc một campus đơn lẻ.</li>
</ul>
<p>Ưu điểm:</p>
<ul>
<li>ít endpoint cần cấu hình hơn,</li>
<li>monitoring và logging đơn giản hơn,</li>
<li>dễ cho thành viên mới của team hiểu hệ thống.</li>
</ul>
<p>Rủi ro và ràng buộc:</p>
<ul>
<li>nếu broker bị down, mọi domain đều bị ảnh hưởng,</li>
<li>tất cả domain chia sẻ cùng giới hạn về hiệu năng và khả năng scale,</li>
<li>cần đặt tên và phân phạm vi cẩn thận để tránh xung đột giữa các domain.</li>
</ul>
<p>Trong thực tế, một deployment single-broker vẫn nên tách môi trường, ví dụ: một broker cho development và một broker cho production.</p>
<h3 id="32-multi-broker-deployments">3.2 Multi-broker deployments</h3>
<p>Trong một deployment <strong>multi-broker</strong>, các broker khác nhau được dùng cho các phạm vi (scope) khác nhau. Các pattern thường gặp:</p>
<ul>
<li>một broker cho mỗi environment (development, staging, production),</li>
<li>một broker cho mỗi thành phố hoặc vùng hành chính,</li>
<li>một broker dành cho high-frequency telemetry và một broker khác cho dữ liệu tham chiếu tĩnh hơn (reference data).</li>
</ul>
<p>Ưu điểm:</p>
<ul>
<li>tách bạch rõ ràng giữa các môi trường hoặc các thành phố,</li>
<li>có thể tinh chỉnh (tuning) và policy retention khác nhau cho từng broker,</li>
<li>sự cố ở một broker không lập tức ảnh hưởng đến tất cả domain.</li>
</ul>
<p>Chi phí và ràng buộc:</p>
<ul>
<li>nhiều endpoint và credential phải quản lý hơn,</li>
<li>update server phải biết broker nào để ghi vào,</li>
<li>dashboard và proxy phải được cấu hình để query đúng broker cho từng context.</li>
</ul>
<p>Tài liệu của một deployment LegoCity nên liệt kê rõ:</p>
<ul>
<li>từng broker instance (tên và base URL),</li>
<li>mỗi broker sở hữu những domain và entity type nào,</li>
<li>những update server và application nào được phép truy cập từng broker.</li>
</ul>
<hr />
<h2 id="4-domains-and-ownership">4. Domains and ownership</h2>
<p>Nếu không có cấu trúc, một broker có thể biến thành một đống entity ngẫu nhiên. LegoCity khuyến khích nhóm entity theo <strong>domain</strong> và gán trách nhiệm rõ ràng.</p>
<p>Các domain điển hình:</p>
<ul>
<li>Environment (weather, air quality, noise),</li>
<li>Water and flooding,</li>
<li>Mobility and transport,</li>
<li>Public services (health, education, administration),</li>
<li>Infrastructure assets (parking, charging stations, cameras).</li>
</ul>
<p>Với mỗi domain, tài liệu nên ghi rõ:</p>
<ul>
<li>những entity type nào thuộc domain (theo tên <code>type</code>),</li>
<li>update server nào chịu trách nhiệm tạo và cập nhật các entity đó,</li>
<li>broker instance nào lưu các entity đó,</li>
<li>dashboard hoặc map view nào tiêu thụ domain này.</li>
</ul>
<p>Nhờ đó ta có câu trả lời rõ ràng cho các câu hỏi như:</p>
<ul>
<li>“Nếu dữ liệu flood sai, phải kiểm tra server nào?”</li>
<li>“Dữ liệu air quality lấy từ đâu?”</li>
<li>“Nếu thêm một thành phố mới, domain nào cần broker mới hoặc server mới?”</li>
</ul>
<p>Domain là khái niệm về <strong>tài liệu và ownership</strong>, <strong>không phải</strong> một thành phần kỹ thuật mới.</p>
<hr />
<h2 id="5-update-servers">5. Update servers</h2>
<p><strong>Update server</strong> là các <strong>integration service</strong>. Chúng kết nối hệ thống bên ngoài với context broker và là các thành phần <strong>ghi entity thường xuyên</strong> duy nhất.</p>
<h3 id="51-responsibilities">5.1 Responsibilities</h3>
<p>Một update server chịu trách nhiệm cho một vòng lặp đầy đủ:</p>
<ol>
<li><strong>Configuration</strong><br />
   Đọc toàn bộ cấu hình từ environment variable hoặc file cấu hình, bao gồm:</li>
<li>broker URL và credential,</li>
<li>external API endpoint và key,</li>
<li>
<p>tần suất cập nhật và các tham số đặc thù domain (ví dụ: danh sách location cần monitor).</p>
</li>
<li>
<p><strong>Data ingestion</strong><br />
   Kết nối tới external data source:</p>
</li>
<li>lấy dữ liệu thô (fetch raw data),</li>
<li>xử lý paging, rate limit và lỗi tạm thời,</li>
<li>
<p>kiểm tra dữ liệu nhận được có cấu trúc hợp lệ hay không.</p>
</li>
<li>
<p><strong>Transformation</strong><br />
   Chuyển dữ liệu thô thành entity nội bộ:</p>
</li>
<li>chọn entity type,</li>
<li>đặt identifier theo convention của project,</li>
<li>điền các attribute khớp với Smart Data Model đã chọn,</li>
<li>
<p>gán location và timestamp.</p>
</li>
<li>
<p><strong>Publishing</strong><br />
   Ghi entity vào broker:</p>
</li>
<li>tạo entity nếu chưa tồn tại,</li>
<li>cập nhật attribute cho entity đã tồn tại,</li>
<li>
<p>xử lý lỗi một phần (partial failure) và retry khi phù hợp.</p>
</li>
<li>
<p><strong>Reporting and health</strong><br />
   Ghi log các sự kiện chính:</p>
</li>
<li>có bao nhiêu entity được tạo hoặc cập nhật,</li>
<li>lần cập nhật thành công gần nhất là khi nào,</li>
<li>có lỗi hay không, và lỗi loại gì.</li>
</ol>
<p>Vòng lặp này có thể được triển khai như một service chạy liên tục với timer hoặc dưới dạng scheduled job.</p>
<h3 id="52-granularity-and-scope">5.2 Granularity and scope</h3>
<p>Khuyến nghị là giữ scope của update server <strong>hẹp và rõ ràng</strong>:</p>
<ul>
<li>một server cho mỗi external data source,</li>
<li>hoặc một server cho mỗi domain khi các nguồn dữ liệu liên quan chặt chẽ.</li>
</ul>
<p>Điều này giúp tránh:</p>
<ul>
<li>trộn lẫn các mối quan tâm không liên quan trong cùng một codebase,</li>
<li>để một lỗi làm ảnh hưởng nhiều domain,</li>
<li>tạo ra các ràng buộc ẩn (hidden coupling) khó debug.</li>
</ul>
<p>Mỗi server nên có tên và scope được tài liệu hóa rõ, ví dụ:</p>
<ul>
<li><code>env-weather-server</code> – đọc weather API, ghi <code>WeatherObserved</code>,</li>
<li><code>water-flood-server</code> – đọc output của flood model, ghi <code>FloodZone</code>,</li>
<li><code>mobility-parking-server</code> – đọc backend parking, ghi <code>ParkingFacility</code> và <code>ParkingSpot</code>.</li>
</ul>
<h3 id="53-idempotency-and-conflict-handling">5.3 Idempotency and conflict handling</h3>
<p>Update server nên được thiết kế <strong>idempotent</strong>:</p>
<ul>
<li>chạy cùng một update hai lần liên tiếp không được tạo ra entity trùng lặp,</li>
<li>update phải luôn hội tụ về trạng thái đúng.</li>
</ul>
<p>Điều này ảnh hưởng đến:</p>
<ul>
<li>cách sinh ID (ID ổn định hay ID random mới),</li>
<li>cách áp dụng update (replace vs patch),</li>
<li>cách xử lý entity bị xóa hoặc lỗi thời (xóa explicit, hoặc đánh dấu inactive).</li>
</ul>
<p>Project nên định nghĩa rõ cách biểu diễn deletion và deactivation để UI diễn giải đúng (ví dụ: entity inactive được ẩn hay hiển thị khác màu).</p>
<hr />
<h2 id="6-current-state-and-history">6. Current state and history</h2>
<p>NGSI-LD broker có thể hỗ trợ cả <strong>current context</strong> và <strong>temporal query</strong>, nhưng LegoCity phải quyết định rõ sẽ sử dụng khả năng này như thế nào.</p>
<h3 id="61-current-state">6.1 Current state</h3>
<p>Với nhiều dashboard, chỉ trạng thái hiện tại là quan trọng. Ví dụ:</p>
<ul>
<li>mực nước hiện tại,</li>
<li>mức chiếm dụng parking hiện tại,</li>
<li>mức độ rủi ro lũ hiện tại.</li>
</ul>
<p>Ở mode này:</p>
<ul>
<li>broker giữ <strong>một entity cho mỗi đối tượng thực</strong>,</li>
<li>mỗi lần update sẽ overwrite các attribute liên quan,</li>
<li>các giá trị cũ không được giữ lại trong broker.</li>
</ul>
<p>Cách này đơn giản hơn để vận hành và thường đủ cho các use case kiểu monitoring.</p>
<h3 id="62-history-and-trends">6.2 History and trends</h3>
<p>Với một số use case, LegoCity có thể cần history ngắn hạn, ví dụ:</p>
<ul>
<li>biểu đồ 24 giờ gần nhất của weather hoặc air quality,</li>
<li>diễn biến gần đây của mực nước trong một đợt lũ.</li>
</ul>
<p>Có hai cách tiếp cận:</p>
<ul>
<li>dùng tính năng temporal của broker (nếu có và được bật) để lưu history attribute,</li>
<li>forward dữ liệu sang một time-series database chuyên dụng trong khi chỉ giữ giá trị mới nhất trong broker.</li>
</ul>
<p>Lựa chọn này nên được tài liệu hóa cho từng domain:</p>
<ul>
<li>domain nào chỉ lưu current state,</li>
<li>domain nào giữ history giới hạn,</li>
<li>dữ liệu analytics dài hạn được lưu ở đâu nếu không nằm trong broker.</li>
</ul>
<p>Dashboard và proxy phải tuân theo quyết định này để query vừa thực tế vừa hiệu quả.</p>
<hr />
<h2 id="7-data-contracts-and-conventions">7. Data contracts and conventions</h2>
<p>Để giữ data layer nhất quán, LegoCity dựa trên các <strong>data contract</strong> explicit giữa update server, broker và UI.</p>
<p>Các contract này bao phủ:</p>
<ul>
<li>dùng entity type nào,</li>
<li>attribute nào bắt buộc phải có,</li>
<li>tuân theo các quy ước đặt tên (naming convention) nào.</li>
</ul>
<h3 id="71-entity-types-and-models">7.1 Entity types and models</h3>
<p>Với mỗi entity type được dùng trong LegoCity, tài liệu nên nêu rõ:</p>
<ul>
<li>tên entity type (ví dụ: <code>WeatherObserved</code>),</li>
<li>nó có theo <strong>FIWARE Smart Data Model</strong> trực tiếp, phiên bản mở rộng, hay schema tùy chỉnh,</li>
<li>attribute nào là mandatory (luôn phải có),</li>
<li>attribute nào là optional và xuất hiện trong điều kiện nào.</li>
</ul>
<p>Update server phải tuân thủ các định nghĩa này khi create hoặc update entity.</p>
<h3 id="72-identifiers">7.2 Identifiers</h3>
<p>Identifier (<code>id</code>) cần:</p>
<ul>
<li>ổn định theo thời gian cho cùng một đối tượng hoặc location trong thế giới thực,</li>
<li>đủ dễ đoán để hệ thống khác có thể tham chiếu entity bằng ID nếu cần,</li>
<li>là duy nhất trong toàn broker, hoặc ít nhất là duy nhất trong từng domain.</li>
</ul>
<p>Tài liệu nên ghi rõ:</p>
<ul>
<li>ID được cấu trúc như thế nào (ví dụ: pattern URN bao gồm domain và location),</li>
<li>ID được suy ra từ identifier của hệ thống bên ngoài hay được sinh nội bộ,</li>
<li>xử lý thế nào nếu hệ thống bên ngoài đổi tên một đối tượng (ID có đổi theo không, và nếu có thì mapping ra sao).</li>
</ul>
<h3 id="73-geospatial-attributes">7.3 Geospatial attributes</h3>
<p>Vì LegoCity là hệ thống tập trung vào bản đồ, geospatial attribute phải nhất quán:</p>
<ul>
<li>dùng tên attribute nào cho vị trí (ví dụ: luôn dùng <code>location</code>),</li>
<li>mỗi entity type dùng loại geometry nào (point, line, polygon),</li>
<li>xử lý hệ tọa độ (coordinate reference system) ra sao (thường là WGS84).</li>
</ul>
<p>Sự nhất quán này cho phép:</p>
<ul>
<li>các map layer generic có thể xử lý nhiều entity type,</li>
<li>filter đơn giản theo bounding box hoặc area of interest.</li>
</ul>
<h3 id="74-time-attributes">7.4 Time attributes</h3>
<p>Time là yếu tố then chốt cho context:</p>
<ul>
<li>mỗi entity kiểu observation nên có một observation timestamp rõ ràng,</li>
<li>các entity biểu diễn đối tượng tĩnh (ví dụ: public facility) có thể có creation timestamp hoặc last-update timestamp.</li>
</ul>
<p>Tài liệu nên liệt kê:</p>
<ul>
<li>attribute nào chứa thông tin thời gian,</li>
<li>chúng được dùng thế nào trong UI (ví dụ: để đánh dấu dữ liệu stale).</li>
</ul>
<hr />
<h2 id="8-multiple-sources-for-the-same-entity-type">8. Multiple sources for the same entity type</h2>
<p>Đôi khi có nhiều hơn một external source cung cấp dữ liệu cho cùng một entity type khái niệm. Ví dụ, các cơ quan khác nhau có thể công bố các flood map trùng lặp một phần.</p>
<p>Trong những trường hợp đó, LegoCity cần rule rõ ràng để tránh nhầm lẫn:</p>
<ul>
<li>có source nào được coi là <strong>authoritative</strong> và các source khác bị bỏ qua không,</li>
<li>entity từ các source khác nhau có được giữ tách biệt bằng ID và metadata không,</li>
<li>có dùng một aggregation service riêng để kết hợp dữ liệu từ nhiều source thành một tập entity thống nhất hay không.</li>
</ul>
<p>Nếu dùng nhiều source, tài liệu nên chỉ rõ cho mỗi entity type:</p>
<ul>
<li>những source nào feed vào loại này,</li>
<li>conflict được giải quyết thế nào,</li>
<li>attribute nào cho biết origin hoặc quality của từng entity.</li>
</ul>
<hr />
<h2 id="9-subscriptions-and-reactive-flows">9. Subscriptions and reactive flows</h2>
<p>NGSI-LD hỗ trợ <strong>subscription</strong> để service được thông báo khi entity thay đổi. LegoCity có thể dùng subscription để kích hoạt workflow backend, nhưng <strong>không dùng như cơ chế chính cho dashboard</strong>.</p>
<p>Các cách dùng khả thi:</p>
<ul>
<li>một service cập nhật các indicator tổng hợp khi sensor entity thay đổi,</li>
<li>một thành phần monitoring gửi cảnh báo khi vượt ngưỡng nào đó.</li>
</ul>
<p>Nếu dùng subscription:</p>
<ul>
<li>cần xác định rõ component nào tạo và quản lý subscription,</li>
<li>phạm vi subscription (entity type nào, điều kiện nào) phải được tài liệu hóa,</li>
<li>cần định nghĩa chiến lược xử lý lỗi và khôi phục (điều gì xảy ra khi gửi notification thất bại).</li>
</ul>
<p>Dashboard vẫn được kỳ vọng dùng <strong>normal query</strong>; mọi logic “push” nên được trung gian bởi application service.</p>
<hr />
<h2 id="10-relationship-to-the-dashboard-and-proxy">10. Relationship to the dashboard and proxy</h2>
<p>Data layer và UI layer giao tiếp với nhau qua một <strong>narrow interface</strong>.</p>
<p>Trong một setup điển hình:</p>
<ul>
<li>proxy layer cung cấp một tập nhỏ endpoint HTTP được thiết kế riêng cho UI,</li>
<li>các endpoint này nội bộ sẽ query broker bằng NGSI-LD và chuyển kết quả sang cấu trúc đơn giản hơn,</li>
<li>dashboard gọi các endpoint đó để lấy dữ liệu cần cho map view và block.</li>
</ul>
<p>Hệ quả:</p>
<ul>
<li>chi tiết nội bộ của broker không bị lộ trực tiếp ra browser hoặc client không tin cậy,</li>
<li>thay đổi trong cấu trúc entity có thể được hấp thụ ở layer proxy mà không làm vỡ UI ngay lập tức,</li>
<li>policy bảo mật (ai được đọc cái gì) có thể được triển khai tập trung tại một nơi.</li>
</ul>
<p>Thiết kế của các proxy endpoint được tài liệu trong phần <em>Development</em>; từ góc nhìn data layer, chỉ cần hiểu rằng:</p>
<ul>
<li>read access được tập trung (centralised),</li>
<li>write access vẫn thuộc về update server,</li>
<li>broker vẫn là <strong>single source of truth</strong>.</li>
</ul>
<hr />
<h2 id="11-summary">11. Summary</h2>
<ul>
<li>Context broker lưu trữ biểu diễn hiện tại của thành phố dưới dạng NGSI-LD entity và được coi là <strong>source of truth</strong>.</li>
<li>Mỗi deployment phải lựa chọn và tài liệu hóa broker topology (single broker hay multi-broker) và cấu trúc domain.</li>
<li>Domain nhóm các entity type và update server liên quan; mỗi domain có ownership và trách nhiệm rõ ràng.</li>
<li>Update server là các writer thường xuyên duy nhất vào broker và phải tuân theo <strong>data contract</strong> chung về cấu trúc entity, identifier, geospatial attribute và timestamp.</li>
<li>Các quyết định về history, retention và multiple data source phải rõ ràng để dashboard và hệ thống analytics hoạt động dự đoán được.</li>
<li>Dashboard đọc từ broker thông qua proxy, giữ cho mối quan tâm UI tách biệt với việc ingest và lưu trữ dữ liệu.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Trở lại mục lục
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u0110\u00e3 sao ch\u00e9p", "clipboard.copy": "Sao ch\u00e9p v\u00e0o b\u1ed9 nh\u1edb t\u1ea1m", "search.result.more.one": "1 t\u1eeb kh\u00e1c trong trang", "search.result.more.other": "# t\u1eeb kh\u00e1c trong trang", "search.result.none": "Kh\u00f4ng t\u00ecm th\u1ea5y t\u00e0i li\u1ec7u li\u00ean quan", "search.result.one": "1 t\u00e0i li\u1ec7u li\u00ean quan", "search.result.other": "# t\u00e0i li\u1ec7u li\u00ean quan", "search.result.placeholder": "Nh\u1eadp \u0111\u1ec3 b\u1eaft \u0111\u1ea7u t\u00ecm ki\u1ebfm", "search.result.term.missing": "Kh\u00f4ng", "select.version": "Ch\u1ecdn phi\u00ean b\u1ea3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>